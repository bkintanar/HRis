<div class="row" v-if="employee">
    <navbar-static-profile-top></navbar-static-profile-top>
    <div class="col-lg-12">
        <div class="ibox float-e-margins">
            <div class="ibox-title">
                <h5>Job Details</h5>
                <div class="ibox-tools">
                    <a class="collapse-link">
                        <i class="fa fa-chevron-up"></i>
                    </a>
                </div>
            </div>
            <div class="ibox-content">
                <form method="POST" onsubmit="return false;" accept-charset="UTF-8" class="form-horizontal">
                    <input name="employee_id" type="hidden" v-model.sync="employee.id">

                    <!-- Start - Job Details -->
                    <div class="form-group">
                        <label for="job_title_id" class="col-md-2 control-label">Job Title</label>
                        <div class="col-sm-4">
                            <chosen id="job_title_id" disabled="disabled" class="vue-chosen"
                                    :options="job_titles_chosen" :v-model.sync="job_title_obj"
                                    :chosen="{ width:'100%' }" placeholder="--- Select ---"
                                    text-key="name"></chosen>
                        </div>

                        <label for="employment_status_id" class="col-md-2 control-label">Employment Status</label>
                        <div class="col-sm-4">
                            <chosen id="employment_status_id" disabled="disabled" class="vue-chosen"
                                    :options="employment_statuses_chosen" :v-model.sync="employment_status_obj"
                                    :chosen="{ width:'100%' }" placeholder="--- Select ---"
                                    text-key="name"></chosen>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="department_id" class="col-md-2 control-label">Department</label>
                        <div class="col-sm-4">
                            <chosen id="department_id" disabled="disabled" class="vue-chosen"
                                    :options="departments_chosen" :v-model.sync="department_obj"
                                    :chosen="{ width:'100%' }" placeholder="--- Select ---"
                                    text-key="name"></chosen>
                        </div>

                        <label for="effective_date" class="col-md-2 control-label">Effective Date</label>
                        <div class="col-sm-4" id="datepicker_effective_date">
                            <div class="input-group date">
                                <span class="input-group-addon"><i class="fa fa-calendar"></i></span><input class="form-control" data-mask="9999-99-99" disabled="disabled" name="effective_date" type="text" v-model.sync="employee.job_history.data.effective_date" id="effective_date">
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="location_id" class="col-md-2 control-label">Location</label>
                        <div class="col-sm-4">
                            <chosen id="location_id" disabled="disabled" class="vue-chosen"
                                    :options="locations_chosen" :v-model.sync="location_obj"
                                    :chosen="{ width:'100%' }" placeholder="--- Select ---"
                                    text-key="name"></chosen>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="comments" class="col-md-2 control-label">Comments</label>
                        <div class="col-sm-10">
                            <textarea class="form-control form-fields" rows="3" disabled="disabled" style="resize:vertical;" name="comments" v-model.sync="employee.job_history.data.comments" id="comments" cols="50"></textarea>
                        </div>
                    </div>
                    <!-- End - Job Details -->

                    <div class="hr-line-dashed"></div>

                    <!-- Start - Employment Commencement -->
                    <h4>Employment Commencement</h4><br>
                    <div class="form-group">
                        <label for="joined_date" class="col-md-2 control-label">Joined Date</label>
                        <div class="col-md-4" id="datepicker_joined_date">
                            <div class="input-group date">
                                <span class="input-group-addon"><i class="fa fa-calendar"></i></span><input class="form-control" data-mask="9999-99-99" disabled="disabled" name="joined_date" type="text" v-model.sync="employee.joined_date" id="joined_date">
                            </div>
                        </div>

                        <label for="probation_end_date" class="col-md-2 control-label">Probation End Date</label>
                        <div class="col-md-4" id="datepicker_probation_end_date">
                            <div class="input-group date">
                                <span class="input-group-addon"><i class="fa fa-calendar"></i></span><input class="form-control" data-mask="9999-99-99" disabled="disabled" name="probation_end_date" type="text" v-model.sync="employee.probation_end_date" id="probation_end_date">
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="permanency_date" class="col-md-2 control-label">Date of Permanency</label>
                        <div class="col-md-4" id="datepicker_permanency_date">
                            <div class="input-group date">
                                <span class="input-group-addon"><i class="fa fa-calendar"></i></span><input class="form-control" data-mask="9999-99-99" disabled="disabled" name="permanency_date" type="text" v-model.sync="employee.permanency_date" id="permanency_date">
                            </div>
                        </div>
                    </div>
                    <!-- End - Employment Commencement -->

                    <div class="hr-line-dashed"></div>

                    <!-- Start - Control Buttons -->
                    <div class="form-group save-form" style="display:none;">
                        <div class="col-sm-4 col-sm-offset-2">
                            <button class="btn btn-white btn-xs cancel-form" @click.prevent="cancelForm">Cancel</button>
                            <input class="btn btn-primary btn-xs" type="submit" @click="submitForm" value="Save changes">
                        </div>
                    </div>
                    <div class="form-group" v-if="has_access[permission + '.update']">
                        <div class="col-sm-4 col-sm-offset-2">
                            <button class="btn btn-primary btn-xs modify-form" @click.prevent="modifyForm">Modify</button>
                        </div>
                    </div>
                    <!-- End - Control Buttons -->
                </form>
            </div>
        </div>
    </div>
    <div class="col-lg-12">
        <div class="ibox float-e-margins">
            <div class="ibox-title">
                <h5>Job History</h5>
                <div class="ibox-tools">
                    <a class="collapse-link">
                        <i class="fa fa-chevron-up"></i>
                    </a>
                </div>
            </div>
            <div class="ibox-content" v-if="employee.job_histories">

                <div class="table-responsive">
                    <table class="table table-striped">
                        <thead>
                        <tr>
                            <th>Job Title</th>
                            <th>Department</th>
                            <th>Effective Date</th>
                            <th>Employment Status</th>
                            <th>Location</th>
                            <th>Comments</th>
                            <th class="fix-width">Action</th>
                        </tr>
                        </thead>

                        <tbody id="job_histories_body">

                        <tr v-for="job_history in employee.job_histories.data" class="job_histories_list" id="job_history_1">

                            <td v-if="job_titles_chosen[job_history.job_title_id-1]">{{job_titles_chosen[job_history.job_title_id-1].name}}</td>
                            <td v-if="departments_chosen[job_history.department_id-1]">{{departments_chosen[job_history.department_id-1].name}}</td>
                            <td>{{job_history.effective_date}}</td>
                            <td v-if="employment_statuses_chosen[job_history.employment_status_id-1]"><span class="label {{employment_statuses_chosen[job_history.employment_status_id-1].class}}">{{employment_statuses_chosen[job_history.employment_status_id-1].name}}</span></td>
                            <td v-if="locations_chosen[job_history.location_id-1]">{{locations_chosen[job_history.location_id-1].name}}</td>
                            <td>{{job_history.comments}}</td>
                            <td>
                                <button v-if="employee.job_histories.data.length > 1" rel="delete" id="delete_{{job_history.id}}" v-if="has_access[permission + '.delete']" class="btn btn-primary btn-xs btn-danger" data-toggle="tooltip" data-placement="bottom" title="" type="button" @click="deleteRecord(job_history, $index)" data-original-title="Delete"><i class="fa fa-times"></i></button>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>

<custom-field-section v-if="employee" :employee="employee" :custom_field_sections="custom_field_sections" :has_access="has_access" :permission="permission" :custom_field_values="custom_field_values"></custom-field-section>
